(function(a){var n="select-one",f="select",j="radio",i="checkbox",g="undefined",m="click.form-plugin",l=":submit,input:image",p="submit.form-plugin",k="textarea",e="image",d=true,b=null,c=false,h="function";a.fn.ajaxSubmit=function(f){var j="method",i="action",g=this;if(!g.length){o("ajaxSubmit: skipping submit process - no element selected");return g}if(typeof f==h)f={success:f};var n=a.trim(g.attr(i));if(n)n=(n.match(/^([^#]+)/)||[])[1];n=n||window.location.href||"";f=a.extend({url:n,type:g.attr(j)||"GET"},f||{});var r={};g.trigger("form-pre-serialize",[g,f,r]);if(r.veto){o("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return g}if(f.beforeSerialize&&f.beforeSerialize(g,f)===c){o("ajaxSubmit: submit aborted via beforeSerialize callback");return g}var q=g.formToArray(f.semantic);if(f.data){f.extraData=f.data;for(var p in f.data)if(f.data[p]instanceof Array)for(var z in f.data[p])q.push({name:p,value:f.data[p][z]});else q.push({name:p,value:f.data[p]})}if(f.beforeSubmit&&f.beforeSubmit(q,g,f)===c){o("ajaxSubmit: submit aborted via beforeSubmit callback");return g}g.trigger("form-submit-validate",[q,g,f,r]);if(r.veto){o("ajaxSubmit: submit vetoed via form-submit-validate trigger");return g}var w=a.param(q);if(f.type.toUpperCase()=="GET"){f.url+=(f.url.indexOf("?")>=0?"&":"?")+w;f.data=b}else f.data=w;var l=g,m=[];f.resetForm&&m.push(function(){l.resetForm()});f.clearForm&&m.push(function(){l.clearForm()});if(!f.dataType&&f.target){var x=f.success||function(){};m.push(function(b){a(f.target).html(b).each(x,arguments)})}else f.success&&m.push(f.success);f.success=function(c,b){for(var a=0,d=m.length;a<d;a++)m[a].apply(f,[c,b,l])};for(var u=a("input:file",g).fieldValue(),v=c,s=0;s<u.length;s++)if(u[s])v=d;var y=c;if(f.iframe||v||y)if(f.closeKeepAlive)a.get(f.closeKeepAlive,t);else t();else a.ajax(f);g.trigger("form-submit-notify",[g,f]);return g;function t(){var m=l[0];if(a(":input[name=submit]",m).length){alert('Error: Form elements must not be named "submit".');return}var g=a.extend({},a.ajaxSettings,f),s=a.extend(d,{},a.extend(d,{},a.ajaxSettings),g),t="jqFormIO"+(new Date).getTime(),p=a('<iframe id="'+t+'" name="'+t+'" src="about:blank" />'),n=p[0];p.css({position:"absolute",top:"-1000px",left:"-1000px"});var h={aborted:0,responseText:b,responseXML:b,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;p.attr("src","about:blank")}},r=g.global;r&&!a.active++&&a.event.trigger("ajaxStart");r&&a.event.trigger("ajaxSend",[h,g]);if(s.beforeSend&&s.beforeSend(h,s)===c){s.global&&a.active--;return}if(h.aborted)return;var v=0,w=0,q=m.clk;if(q){var x=q.name;if(x&&!q.disabled){f.extraData=f.extraData||{};f.extraData[x]=q.value;if(q.type==e){f.extraData[name+".x"]=m.clk_x;f.extraData[name+".y"]=m.clk_y}}}setTimeout(function(){var e="multipart/form-data",b="target",q=l.attr(b),r=l.attr(i);m.setAttribute(b,t);m.getAttribute(j)!="POST"&&m.setAttribute(j,"POST");m.getAttribute(i)!=g.url&&m.setAttribute(i,g.url);!f.skipEncodingOverride&&l.attr({encoding:e,enctype:e});g.timeout&&setTimeout(function(){w=d;o()},g.timeout);var h=[];try{if(f.extraData)for(var k in f.extraData)h.push(a('<input type="hidden" name="'+k+'" value="'+f.extraData[k]+'" />').appendTo(m)[0]);p.appendTo("body");n.attachEvent?n.attachEvent("onload",o):n.addEventListener("load",o,c);m.submit()}finally{m.setAttribute(i,r);q?m.setAttribute(b,q):l.removeAttr(b);a(h).remove()}},10);var u=0;function o(){if(v++)return;n.detachEvent?n.detachEvent("onload",o):n.removeEventListener("load",o,c);var f=d;try{if(w)throw"timeout";var i,e;e=n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document;if((e.body==b||e.body.innerHTML=="")&&!u){u=1;v--;setTimeout(o,100);return}h.responseText=e.body?e.body.innerHTML:b;h.responseXML=e.XMLDocument?e.XMLDocument:e;h.getResponseHeader=function(b){var a={"content-type":g.dataType};return a[b]};if(g.dataType=="json"||g.dataType=="script"){var j=e.getElementsByTagName(k)[0];h.responseText=j?j.value:h.responseText}else if(g.dataType=="xml"&&!h.responseXML&&h.responseText!=b)h.responseXML=y(h.responseText);i=a.httpData(h,g.dataType)}catch(l){f=c;a.handleError(g,h,"error",l)}if(f){g.success(i,"success");r&&a.event.trigger("ajaxSuccess",[h,g])}r&&a.event.trigger("ajaxComplete",[h,g]);r&&!--a.active&&a.event.trigger("ajaxStop");g.complete&&g.complete(h,f?"success":"error");setTimeout(function(){p.remove();h.responseXML=b},100)}function y(c,a){if(window.ActiveXObject){a=new ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(c)}else a=(new DOMParser).parseFromString(c,"text/xml");return a&&a.documentElement&&a.documentElement.tagName!="parsererror"?a:b}}};a.fn.ajaxForm=function(d){return this.ajaxFormUnbind().bind(p,function(){a(this).ajaxSubmit(d);return c}).each(function(){a(l,this).bind(m,function(d){var f=this,c=f.form;c.clk=f;if(f.type==e)if(d.offsetX!=undefined){c.clk_x=d.offsetX;c.clk_y=d.offsetY}else if(typeof a.fn.offset==h){var g=a(f).offset();c.clk_x=d.pageX-g.left;c.clk_y=d.pageY-g.top}else{c.clk_x=d.pageX-f.offsetLeft;c.clk_y=d.pageY-f.offsetTop}setTimeout(function(){c.clk=c.clk_x=c.clk_y=b},10)})})};a.fn.ajaxFormUnbind=function(){this.unbind(p);return this.each(function(){a(l,this).unbind(m)})};a.fn.formToArray=function(k){var h=[];if(this.length==0)return h;var c=this[0],m=k?c.getElementsByTagName("*"):c.elements;if(!m)return h;for(var n=0,r=m.length;n<r;n++){var j=m[n],f=j.name;if(!f)continue;if(k&&c.clk&&j.type==e){if(!j.disabled&&c.clk==j){h.push({name:f,value:a(j).val()});h.push({name:f+".x",value:c.clk_x},{name:f+".y",value:c.clk_y})}continue}var i=a.fieldValue(j,d);if(i&&i.constructor==Array)for(var o=0,q=i.length;o<q;o++)h.push({name:f,value:i[o]});else i!==b&&typeof i!=g&&h.push({name:f,value:i})}if(!k&&c.clk){var p=a(c.clk),l=p[0],f=l.name;if(f&&!l.disabled&&l.type==e){h.push({name:f,value:p.val()});h.push({name:f+".x",value:c.clk_x},{name:f+".y",value:c.clk_y})}}return h};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h)return;var e=a.fieldValue(this,d);if(e&&e.constructor==Array)for(var f=0,i=e.length;f<i;f++)c.push({name:h,value:e[f]});else e!==b&&typeof e!=g&&c.push({name:this.name,value:e})});return a.param(c)};a.fn.fieldValue=function(f){for(var d=[],e=0,h=this.length;e<h;e++){var i=this[e],c=a.fieldValue(i,f);if(c===b||typeof c==g||c.constructor==Array&&!c.length)continue;c.constructor==Array?a.merge(d,c):d.push(c)}return d};a.fieldValue=function(a,l){var u=a.name,h=a.type,r=a.tagName.toLowerCase();if(typeof l==g)l=d;if(l&&(!u||a.disabled||h=="reset"||h=="button"||(h==i||h==j)&&!a.checked||(h=="submit"||h==e)&&a.form&&a.form.clk!=a||r==f&&a.selectedIndex==-1))return b;if(r==f){var m=a.selectedIndex;if(m<0)return b;for(var s=[],q=a.options,o=h==n,t=o?m+1:q.length,p=o?m:0;p<t;p++){var c=q[p];if(c.selected){var k=c.value;if(!k)k=c.attributes&&c.attributes["value"]&&!c.attributes["value"].specified?c.text:c.value;if(o)return k;s.push(k)}}return s}return a.value};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var a=this,b=a.type,d=a.tagName.toLowerCase();if(b=="text"||b=="password"||d==k)a.value="";else if(b==i||b==j)a.checked=c;else if(d==f)a.selectedIndex=-1})};a.fn.resetForm=function(){return this.each(function(){var a=this;(typeof a.reset==h||typeof a.reset=="object"&&!a.reset.nodeType)&&a.reset()})};a.fn.enable=function(a){if(a==undefined)a=d;return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){if(b==undefined)b=d;return this.each(function(){var d=this,g=d.type;if(g==i||g==j)d.checked=b;else if(d.tagName.toLowerCase()=="option"){var e=a(d).parent(f);b&&e[0]&&e[0].type==n&&e.find("option").selected(c);d.selected=b}})};function o(){a.fn.ajaxSubmit.debug&&window.console&&window.console.log&&window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}})(jQuery)